import{o as l,c as u,a as i,b as k,w as C,F as V,r as $,n as _,t as M,d as p,u as x,T as B,m as D,e as S,f as g,g as Z,v as F,h as L,i as N,j,k as f,l as h,p as z}from"./index-B3IpxbCW.js";function A(d,t){return l(),u("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[i("path",{"fill-rule":"evenodd",d:"M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25ZM12.75 9a.75.75 0 0 0-1.5 0v2.25H9a.75.75 0 0 0 0 1.5h2.25V15a.75.75 0 0 0 1.5 0v-2.25H15a.75.75 0 0 0 0-1.5h-2.25V9Z","clip-rule":"evenodd"})])}function O(d,t){return l(),u("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[i("path",{"fill-rule":"evenodd",d:"M16.5 4.478v.227a48.816 48.816 0 0 1 3.878.512.75.75 0 1 1-.256 1.478l-.209-.035-1.005 13.07a3 3 0 0 1-2.991 2.77H8.084a3 3 0 0 1-2.991-2.77L4.087 6.66l-.209.035a.75.75 0 0 1-.256-1.478A48.567 48.567 0 0 1 7.5 4.705v-.227c0-1.564 1.213-2.9 2.816-2.951a52.662 52.662 0 0 1 3.369 0c1.603.051 2.815 1.387 2.815 2.951Zm-6.136-1.452a51.196 51.196 0 0 1 3.273 0C14.39 3.05 15 3.684 15 4.478v.113a49.488 49.488 0 0 0-6 0v-.113c0-.794.609-1.428 1.364-1.452Zm-.355 5.945a.75.75 0 1 0-1.5.058l.347 9a.75.75 0 1 0 1.499-.058l-.346-9Zm5.48.058a.75.75 0 1 0-1.498-.058l-.347 9a.75.75 0 0 0 1.5.058l.345-9Z","clip-rule":"evenodd"})])}const U={class:"align-middle inline-block"},E=["onClick"],G={__name:"TaskList",props:{tasks:{type:Array,default:()=>[]}},emits:["deleteTaskHandler"],setup(d,{emit:t}){const o=t,m=e=>{e.status="isDeleted",o("deleteTaskHandler",e.id)};return(e,s)=>(l(),k(B,{class:"task",name:"list",tag:"ul"},{default:C(()=>[(l(!0),u(V,null,$(d.tasks,c=>(l(),u("li",{class:_(["task__element relative border-solid border border-light-blue-500 rounded-xl drop-shadow-md p-4 mb-2",c.status==="isDeleted"?"task__deleted":""]),key:c.id},[i("p",U,M(c.text),1),i("button",{class:"text-red-500 hover:text-red-400 ease-in duration-300",onClick:v=>m(c)},[p(x(O),{class:"absolute top-1/2 -translate-y-1/2 right-4 size-5 text-inherit"})],8,E)],2))),128))]),_:1}))}},J={class:"flex items-center gap-2"},q={__name:"TaskCreate",props:{modelValue:{},modelModifiers:{}},emits:D(["onSubmitButtonHandle"],["update:modelValue"]),setup(d){const t=S(d,"modelValue"),o=g(!1);return(m,e)=>(l(),u("form",J,[Z(i("input",{placeholder:"Добавьте задачу",class:_(["rounded-md border-2 p-2 text-gray-900",{"border-blue-400 outline-none":o.value}]),type:"text","onUpdate:modelValue":e[0]||(e[0]=s=>t.value=s),onFocus:e[1]||(e[1]=s=>o.value=!0),onFocusout:e[2]||(e[2]=s=>o.value=!1)},null,34),[[F,t.value]]),i("button",{onClick:e[3]||(e[3]=L(s=>m.$emit("onSubmitButtonHandle"),["prevent"]))},[p(x(A),{class:"size-10 text-blue-500"})])]))}},I={class:"m-auto w-2/4"},K=["innerHTML"],P={class:"mt-5"},R={__name:"TaskListMain",async setup(d){let t,o;const m=N("axios"),e=j({data:[]}),s=g(""),c=async()=>{const n=await fetch("https://667d3095297972455f63f0d2.mockapi.io/api/tasks");e.data=await n.json()},{data:v}=([t,o]=f(()=>m.get("https://667d3095297972455f63f0d2.mockapi.io/api/tasks")),t=await t,o(),t);console.log(v),[t,o]=f(()=>c()),await t,o();const w=h(()=>{const n=e.data.reduce((a,r)=>a>r.id?a:r.id,0);return Number(n)+1}),b=h(()=>e.data.length?"Список задач":"Список задач пуст"),T=()=>{const n={id:w.value||1,text:s.value};fetch("https://667d3095297972455f63f0d2.mockapi.io/api/tasks",{method:"post",headers:{"content-type":"application/json"},body:JSON.stringify(n)}).then(a=>{a.ok&&(s.value="",e.data=[...e.data,n])}).catch(a=>console.log(a))},y=async n=>{await fetch(`https://667d3095297972455f63f0d2.mockapi.io/api/tasks/${n}`,{method:"delete"}).then(a=>{a.ok&&(s.value="",e.data=e.data.filter(r=>n!=r.id))}).catch(a=>console.log(a))};return(n,a)=>{var r;return l(),u("div",I,[i("h1",{class:"text-4xl mt-10",innerHTML:b.value},null,8,K),i("div",P,[(r=e==null?void 0:e.data)!=null&&r.length?(l(),k(G,{key:0,tasks:e.data,onDeleteTaskHandler:y},null,8,["tasks"])):z("",!0)]),p(q,{modelValue:s.value,"onUpdate:modelValue":a[0]||(a[0]=H=>s.value=H),onOnSubmitButtonHandle:T},null,8,["modelValue"])])}}};export{R as default};
